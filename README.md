# Candles-Shop
**Первый пет проект. Сайт про продаже свечей. Функционал хоть и работает, но код слишком громоздкий, поэтому выкладываю только для того, чтобы можно было с чем сравнить проект из репозитория 'Food-Shop'.**

## Описание
Идеей было создать интернет магазин про продаже свечей с минимальным набором функций. В конечном счёте реализовал следующее:
 - Регистрацию, авторизацию пользователя.
 - Создание товара, примеров товара через админку.
 - Восстановление пароля с помощью эмулятора почтового сервиса.
 - Корзину пользователя
 - Добавление товара в корзину
 - Оформление и просмотр заказов
 - Личный кабинет пользователя, в котором он может заполнить дополнительные поля, которые при наличии будут автоматически подставляться в соответствующие поля при оформлении заказа.
 - Возможность развернуть проект в докере
  
## Технологии
- Python 3.11
- Django 4.0
- Redis 5.3
- Docker

## Локальный запуск:
- Установите и активируйте виртуальное окружение
```
python -m venv venv
venv/scripts/activate
```
- Установите зависимости из файла requirements.txt
```
pip install -r requirements.txt
```
- В settings заменить данные бд на свои, также может потребоваться заменить порт сервера redis
- Выполнить миграции
```
python manage.py migrate
```
- При необходимости заполнить бд из дампа:
```
python manage.py loaddata db_dump.json

```
- В таком случае в бд уже будет суперпользователь с данными:
  - Логин: admin@gmail.com
  - Пароль: admin

- Запустить сервер командой:
```
python3 manage.py runserver
```

## Запуск в контейнерах:
- В директории infra создать .env файл и заполнить его данными, например:
```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
REDIS_HOST='redis://redis:6379/1'
```
- В директории infra выполнить команду:
```
docker-compose up -d
```
- Выполнить миграции командой:
```
docker-compose exec web python manage.py migrate
```
- Заполнить бд данными из дампа командой:
```
docker-compose exec web python manage.py loaddata db_dump.json
```
- В таком случае в бд уже будет суперпользователь с данными:
  - Логин: admin@gmail.com
  - Пароль: admin

- В противном случае создать суперпользователя командой:
```
sudo docker-compose exec web python manage.py createsuperuser
```
Сервер будет доступен по адресу:
 http://localhost/


Автор: Алексей Кузьменко
